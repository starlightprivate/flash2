app-server:
  build: .
  ports:
    - "8000:8000"
  links:
    - redis
  environment:
    # Now, devops should be managing the NODE_ENV and REDIS_AUTH
    # We already have these initialized with double pipes in
    # the `server-config` file. Why do we need these?
    # - NODE_ENV=development
    # - REDIS_AUTH=tlergerbyhormecielkwarsiblevateximethanimpsonaturyotholholonitervusebardebedaphorgebulgibroperymbeam
    - NODE_ENV=
    - REDIS_AUTH=

redis:
  build: ./redis

nginx:
  build: ./nginx
  links:
    - app-server:app-server
  ports:
    - "80:80"
    - "443:443"